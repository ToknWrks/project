"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{3215:function(e,t,s){s.d(t,{_:function(){return R}});var a={};s.r(a);var r=s(5893),n=s(4680),i=s(7294),l=s(434),o=s(108);let c=l.fC,d=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});d.displayName=l.aV.displayName;let m=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});m.displayName=l.xz.displayName;let u=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.VY,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});u.displayName=l.VY.displayName;let x=(0,s(5139).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)(x({variant:s}),t),...a})}var h=s(7245),p=s(1707),g=s(3432),v=s(1664),w=s.n(v),j=s(3954),N=s(3941);function y(e){var t,s;let{chainName:a,delegation:n,onClaimSuccess:l}=e,c=(0,o.u)(Number(n.balance.amount)/1e6,6),d=(null===(t=n.validator)||void 0===t?void 0:t.name)||"Unknown Validator",m=n.delegation.validator_address,{claimRewards:u,isLoading:x}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"osmosis",[t,s]=(0,i.useState)(!1),{address:a,getSigningClient:r}=(0,j.Z)(e),{toast:n}=(0,N.pm)();return{claimRewards:(0,i.useCallback)(async t=>{if(!a||!t.length)return n({title:"Error",description:"No validators selected for claiming rewards",variant:"destructive"}),!1;s(!0);try{let s=await r();if(!s)throw Error("Failed to get signing client");let i=t.map(e=>({typeUrl:"/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward",value:{delegatorAddress:a,validatorAddress:e}})),l=await s.signAndBroadcast(a,i,{amount:[{amount:"5000",denom:"osmosis"===e?"uosmo":"uatom"}],gas:"200000"});if(0!==l.code)throw Error(l.rawLog||"Failed to claim rewards");return n({title:"Success",description:"Successfully claimed rewards"}),window.location.reload(),!0}catch(e){return console.error("Error claiming rewards:",e),n({title:"Error",description:e instanceof Error?e.message:"Failed to claim rewards",variant:"destructive"}),!1}finally{s(!1)}},[a,r,e,n]),isLoading:t}}(a),v="osmosis"===a?"https://www.mintscan.io/osmosis/validators/".concat(m):"https://www.mintscan.io/".concat(a,"/validators/").concat(m),y=async()=>{await u([m])&&l&&l()};return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium",children:d}),(0,r.jsx)(w(),{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:(0,r.jsx)(p.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)(f,{variant:"outline",className:"w-fit",children:[c," ","osmosis"===a?"OSMO":a.toUpperCase()]}),(null===(s=n.validator)||void 0===s?void 0:s.commission)&&(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Commission: ",(100*Number(n.validator.commission)).toFixed(2),"%"]})]}),(0,r.jsx)(h.z,{variant:"outline",size:"sm",onClick:y,disabled:x,children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"h-3 w-3 animate-spin"}),(0,r.jsx)("span",{className:"ml-1",children:"Claiming..."})]}):"Claim"})]})}var b=s(8082),k=s(4598);function C(e){let{chainName:t="osmosis"}=e,{delegations:s,isLoading:a,status:n}=(0,j.Z)(t);return a?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)(g.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):s.length?(0,r.jsx)("div",{className:"space-y-4",children:s.map((e,s)=>(0,r.jsx)(y,{chainName:t,delegation:e},"".concat(e.delegation.validator_address,"-").concat(s)))}):(0,r.jsxs)(b.bZ,{children:[(0,r.jsx)(k.Z,{className:"h-4 w-4"}),(0,r.jsx)(b.X,{children:"No active delegations found"})]})}var S=s(4531);let E={osmosis:{denom:"uosmo",symbol:"OSMO",decimals:6,explorer:"https://www.mintscan.io/osmosis"},cosmoshub:{denom:"uatom",symbol:"ATOM",decimals:6,explorer:"https://www.mintscan.io/cosmos"}};var O=s(3645);function Z(e){let{amount:t,timestamp:s,validatorName:a,usdValue:n,txHash:i,chainName:l}=e,c="osmosis"===l?"https://www.mintscan.io/osmosis/tx/".concat(i):"https://www.mintscan.io/".concat(l,"/tx/").concat(i),d="osmosis"===l?"OSMO":l.toUpperCase(),m=(0,o.u)(Number(t)/1e6,2);return(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium",children:a}),(0,r.jsx)(O.Z,{className:"h-4 w-4 text-green-500"})]}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:s})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)(f,{variant:"outline",children:[m," ",d]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["$",n]})]}),(0,r.jsx)(w(),{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:(0,r.jsx)(p.Z,{className:"h-4 w-4"})})]})]})}var F=s(5819);function _(e){let{chainName:t="osmosis",address:s}=e,{fetchClaimsHistory:n,isLoading:l,error:c}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"osmosis",[t,s]=(0,i.useState)(!1),[r,n]=(0,i.useState)(null);return{fetchClaimsHistory:(0,i.useCallback)(async t=>{if(!t)return[];s(!0),n(null);try{var r;let{data:s}=await a.skipApi.getTransactions({chainName:e,address:t,type:"withdraw_delegator_reward"});if(!(null==s?void 0:null===(r=s.txs)||void 0===r?void 0:r.length))return[];let n=E[e];if(!n)throw Error("Unsupported chain: ".concat(e));return(await Promise.all(s.txs.map(async t=>{try{var s;let{data:r}=await a.skipApi.getHistoricalPrice({chainName:e,timestamp:t.timestamp,denom:n.denom}),i=t.messages.reduce((e,t)=>{if("/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward"===t.type){var s;let a=null===(s=t.amounts)||void 0===s?void 0:s.find(e=>e.denom===n.denom);return e+(a?Number(a.amount):0)}return e},0),l=(null==r?void 0:r.price)||0,c=i*l/Math.pow(10,n.decimals);return{amount:(0,o.u)(i/Math.pow(10,n.decimals)),timestamp:(0,S.WU)(new Date(t.timestamp),"MMM d, yyyy HH:mm"),validatorName:(null===(s=t.validator)||void 0===s?void 0:s.moniker)||"Unknown Validator",usdValue:c.toFixed(2),txHash:t.hash}}catch(e){return console.warn("Error processing tx ".concat(t.hash,":"),e),null}}))).filter(e=>null!==e).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())}catch(t){let e=t instanceof Error?t.message:"Failed to load claims history";return console.error("Error fetching claims history:",e),n(e),[]}finally{s(!1)}},[e]),isLoading:t,error:r}}(t),[d,m]=(0,i.useState)([]);return((0,i.useEffect)(()=>{(async()=>{s&&m(await n(s))})()},[s,n]),l)?(0,r.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,r.jsx)(F.O,{className:"h-20 w-full"},e))}):c?(0,r.jsxs)(b.bZ,{children:[(0,r.jsx)(k.Z,{className:"h-4 w-4"}),(0,r.jsx)(b.X,{children:c})]}):d.length?(0,r.jsx)("div",{className:"space-y-4",children:d.map((e,s)=>(0,r.jsx)(Z,{...e,chainName:t},"".concat(e.txHash,"-").concat(s)))}):(0,r.jsxs)(b.bZ,{children:[(0,r.jsx)(k.Z,{className:"h-4 w-4"}),(0,r.jsx)(b.X,{children:"No claims history found"})]})}function R(e){let{chainName:t="osmosis",onTotalClaimedChange:s}=e,{address:a}=(0,j.Z)(t);return(0,r.jsxs)(n.Zb,{className:"col-span-1",children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Delegations & History"})}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)(c,{defaultValue:"delegations",className:"w-full",children:[(0,r.jsxs)(d,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(m,{value:"delegations",children:"Delegations"}),(0,r.jsx)(m,{value:"claims",children:"Claims History"})]}),(0,r.jsx)(u,{value:"delegations",className:"mt-4",children:(0,r.jsx)(C,{chainName:t})}),(0,r.jsx)(u,{value:"claims",className:"mt-4",children:(0,r.jsx)(_,{chainName:t,address:a})})]})})]})}},2572:function(e,t,s){s.d(t,{k:function(){return f}});var a=s(5893),r=s(5615),n=s(8793),i=s(4715),l=s(723),o=s(4570),c=s(1712),d=s(4680);let m=[{date:"Jan",rewards:400},{date:"Feb",rewards:600},{date:"Mar",rewards:550},{date:"Apr",rewards:800},{date:"May",rewards:950},{date:"Jun",rewards:1100},{date:"Jul",rewards:950}],u=e=>(0,a.jsx)(r.K,{...e,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),x=e=>(0,a.jsx)(n.B,{...e,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"$".concat(e)});function f(){return(0,a.jsxs)(d.Zb,{className:"h-full",children:[(0,a.jsx)(d.Ol,{children:(0,a.jsx)(d.ll,{children:"Rewards History"})}),(0,a.jsx)(d.aY,{className:"pl-2",children:(0,a.jsx)(i.h,{width:"100%",height:300,children:(0,a.jsxs)(l.w,{data:m,children:[(0,a.jsx)(u,{dataKey:"date"}),(0,a.jsx)(x,{}),(0,a.jsx)(o.u,{}),(0,a.jsx)(c.x,{type:"monotone",dataKey:"rewards",stroke:"hsl(var(--primary))",strokeWidth:2,dot:!1})]})})})]})}},7156:function(e,t,s){s.d(t,{A:function(){return c}});var a=s(5893),r=s(7294),n=s(4680),i=s(5819),l=s(3954),o=s(2485);function c(e){let{title:t,icon:s,type:c,description:d,value:m,isLoading:u,tokenSymbol:x="OSMO",chainName:f="osmosis"}=e,{balance:h,stakedBalance:p,unclaimedRewards:g,status:v}=(0,l.Z)(f),{formatUsdValue:w,fetchPrice:j}=(0,o.p)(f),{calculateTaxObligation:N}=function(){let[e,t]=(0,r.useState)(30);return(0,r.useEffect)(()=>{let e=localStorage.getItem("osmosis_dashboard_settings");e&&t(Number(JSON.parse(e).taxRate));let s=e=>{t(Number(e.detail.taxRate))};return window.addEventListener("settingsChanged",s),()=>{window.removeEventListener("settingsChanged",s)}},[]),{taxRate:e,calculateTaxObligation:t=>("string"==typeof t?Number(t.replace(/[^0-9.-]+/g,"")):t)*e/100}}(),[y,b]=r.useState("$0.00"),[k,C]=r.useState(0);r.useEffect(()=>{(async()=>{if("tax"===c){b(m?"$".concat(m.toFixed(2)):"$0.00");return}try{let e="0";switch(c){case"available":e=h;break;case"staked":e=p;break;case"unclaimed":e=g;break;case"converted":{let e=await j(f),t=(Number(h)+Number(p)+Number(g))*e;C(t),b("$".concat(t.toFixed(2)));return}}let t=await w(e);if(b(t),"unclaimed"===c){let e=N(t);window.dispatchEvent(new CustomEvent("taxObligationChanged",{detail:{taxObligation:e}}))}}catch(e){console.error("Error formatting USD value:",e),b("$0.00")}})()},[c,h,p,g,w,m,N,f,j]);let S="Connected"===v;return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:t}),s]}),(0,a.jsx)(n.aY,{children:u?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.O,{className:"h-8 w-[100px]"}),d&&(0,a.jsx)(i.O,{className:"h-4 w-[200px]"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(()=>{if(!S)return"--";if("converted"===c)return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:y}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Total ",x," Value"]})]});if("tax"===c)return y;switch(c){case"available":return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[h," ",x]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:y})]});case"staked":return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[p," ",x]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:y})]});case"unclaimed":let e=N(y);return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{children:[g," ",x]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:y}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[d,": $",e.toFixed(2)]})]});default:return"--"}})()}),d&&"unclaimed"!==c&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:S?d:"Connect wallet to view"})]})})]})}},4680:function(e,t,s){s.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var a=s(5893),r=s(7294),n=s(108);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},2485:function(e,t,s){s.d(t,{p:function(){return l}});var a=s(7294),r=s(7066);let n="token_prices_cache",i={osmosis:"osmosis",cosmoshub:"cosmos",celestia:"celestia",akash:"akash-network",regen:"regen",juno:"juno-network",dydx:"dydx",saga:"saga-2",omniflixhub:"omniflix-network",stargaze:"stargaze",stride:"stride",sentinel:"sentinel",archway:"archway",noble:"noble",persistence:"persistence",evmos:"evmos",injective:"injective-protocol",secret:"secret",terra:"terra-luna-2",kujira:"kujira"};function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"osmosis",[t,s]=(0,a.useState)(()=>{try{let e=localStorage.getItem(n);return e?JSON.parse(e):{}}catch(e){return{}}}),l=(0,a.useCallback)(e=>{let s=t[e];return s&&Date.now()-s.timestamp<3e5?s.price:null},[t]),o=(0,a.useCallback)((e,a)=>{let r={...t,[e]:{price:a,timestamp:Date.now()}};s(r);try{localStorage.setItem(n,JSON.stringify(r))}catch(e){console.warn("Failed to cache price:",e)}},[t]),c=(0,a.useCallback)(async e=>{let t=i[e];if(!t)return console.warn("No Coingecko ID mapping for chain: ".concat(e)),0;try{var s;let a=l(e);if(null!==a)return a;let n=await r.default.get("https://api.coingecko.com/api/v3/simple/price?ids=".concat(t,"&vs_currencies=usd"),{timeout:5e3}),i=(null===(s=n.data[t])||void 0===s?void 0:s.usd)||0;return o(e,i),i}catch(t){return console.warn("Error fetching ".concat(e," price:"),t),l(e)||0}},[l,o]);return{formatUsdValue:(0,a.useCallback)(async t=>{if(!t)return"$0.00";let s="string"==typeof t?parseFloat(t):t;if(isNaN(s))return"$0.00";try{let t=await c(e);return"$".concat((s*t).toFixed(2))}catch(e){return console.warn("Error formatting USD value:",e),"$0.00"}},[e,c]),fetchPrice:c}}}}]);